# プロジェクト名
Snowflake_Sandbox

## 目的
Snowflakeのサンドボックス環境用のリソース（関連するAWS含む）をTerraformで管理する。

## 設計方針
- 命名規則やディレクトリ構成は、Snowflake、AWS、Terraformのベストプラクティスに準拠。
- リソースの作成には極力AccountAdminは使わない。

## Terraform管理と手管理の境界
- Terraform applyを1回だけ実行すれば、コードと実機の状態が一致するようにする。Terrafromの実行に必要なリソースはTerraformでは作成できない（鶏卵の関係）ため、手作成しておく前提とする。

## ドキュメンテーション
- Terraformの実行前に手作業で準備すべき内容（アカウント情報を控える、Terraform管理対象リソースの作成に必要なリソースを手作成しておく　など）は、Terraformの実行手順と合わせて、手順書にドキュメント化する
- 開発時に生成AIが行う作業のうち、ユーザーが実行する内容は必ず手順書に記載し、手順書通りに実行すれば再現できるようにする。

## RBAC 管理ルール
- リソース（データベース・スキーマ・テーブル・ステージ等）またはロールを**作成・変更・削除した際は `docs/rbac_matrix.md` を必ず更新すること**
- 機能的ロール（FR_*）が権限を保持し、役割ロール（DEVELOPER/VIEWER/CORTEX）がそれを継承する設計を維持すること
- 新しいリソースへの権限は `functional_roles.tf` 内の対応する FR_ ロールに追加すること

## 注意事項
- SnowflakeおよびAWSの接続情報などは、環境変数ファイルで管理し、Git対象外とすること
- **必ずterraform planを行い正しく反映されることを確認してからapplyすること！**